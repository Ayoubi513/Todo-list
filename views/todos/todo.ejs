<%- include('../commun/header.ejs') %>
<%- include('../commun/nav.ejs') %>
<body class="bg-gray-200">

  <div class="container mt-10 px-4">
    
    <div class="px-20 mt-10 mb-10">
    <div class="flex justify-between">
  <h2 class="text-3xl text-sm text-indigo-400 mb-4 uppercase tracking-wide">Todo</h2>
  
  <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full">
  <div class="flex justify-between space-x-2">
    <svg class="" id="Layer_4" enable-background="new 0 0 24 24" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><g><path d="m10 24c1.811 0 3.326-1.291 3.674-3h-7.348c.348 1.709 1.863 3 3.674 3z"/></g><path d="m17.576 14.496c-.026 0-.05.004-.076.004-4.411 0-8-3.589-8-8 0-1.733.56-3.334 1.5-4.646v-.854c0-.553-.448-1-1-1s-1 .447-1 1v1.08c-3.387.488-6 3.401-6 6.92v2.788c0 1.979-.867 3.847-2.388 5.133-.389.333-.612.817-.612 1.329 0 .965.785 1.75 1.75 1.75h16.5c.965 0 1.75-.785 1.75-1.75 0-.512-.223-.996-.622-1.337-.788-.667-1.396-1.497-1.802-2.417z"/><g><path d="m17.5 0c-3.584 0-6.5 2.916-6.5 6.5s2.916 6.5 6.5 6.5 6.5-2.916 6.5-6.5-2.916-6.5-6.5-6.5zm2.5 7.5h-1.5v1.5c0 .552-.448 1-1 1s-1-.448-1-1v-1.5h-1.5c-.552 0-1-.448-1-1s.448-1 1-1h1.5v-1.5c0-.552.448-1 1-1s1 .448 1 1v1.5h1.5c.552 0 1 .448 1 1s-.448 1-1 1z"/></g></svg>
  <a href="/create">  Add New Todo</a>
  </div>
</button>
</div>
    <% if (todos.length > 0) { %>
            <% todos.forEach(todo =>{ %>
       <div class="bg-indigo-100 border border-indigo-400 text-indigo-700 px-4 py-3 rounded relative m-5" role="alert">
  <strong class="font-bold"><%= todo.title %></strong>
  <span class="block sm:inline"><p><%= todo.body %></p></span>
  <a class="delete" href="/todos/<%= todo._id %>">
  <span class="absolute top-0 bottom-0 right-0 px-4 py-3">
    <svg class="fill-current h-6 w-6 text-indigo-500" role="button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title>Close</title><path d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"/></svg>
  </span>
  </a>
</div>
         <% }) %>
        <% } else { %> 
        <p>noo result </p>
        <% } %>


   

    </div>

    
  </div> 
    <script>
    const trashcan = document.querySelector('a.delete');
    trashcan.addEventListener('click', (e) => {
      const endpoint = `/todos/${trashcan.dataset.doc}`;
      fetch(endpoint, {
        method: 'DELETE',
      })
      .then(response => response.json())
      .then(data => window.location.href = data.redirect)
      .catch(err => console.log(err));
    });
    
  </script>
<%- include('../commun/footer.ejs') %>

</body>
</html>